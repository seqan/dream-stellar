cmake_minimum_required (VERSION 3.16)

add_custom_target (cli_test ALL)

macro (add_cli_test test_filename)
    add_app_test (${test_filename})

    seqan3_test_component (target "${test_filename}" TARGET_NAME)
    add_dependencies (cli_test ${target})
    add_dependencies (${target} "${PROJECT_NAME}")
endmacro ()

add_cli_test (valik_options_test.cpp)
target_use_datasources (valik_options_test FILES bin_1.fasta)
target_use_datasources (valik_options_test FILES bin_2.fasta)
target_use_datasources (valik_options_test FILES bin_3.fasta)
target_use_datasources (valik_options_test FILES query.fq)
target_use_datasources (valik_options_test FILES various_chromosome_lengths.fasta)

add_cli_test (valik_test.cpp)
target_use_datasources (valik_test FILES bin_0.fasta)
target_use_datasources (valik_test FILES bin_1.fasta)
target_use_datasources (valik_test FILES bin_2.fasta)
target_use_datasources (valik_test FILES bin_3.fasta)
target_use_datasources (valik_test FILES bin_4.fasta)
target_use_datasources (valik_test FILES bin_5.fasta)
target_use_datasources (valik_test FILES bin_6.fasta)
target_use_datasources (valik_test FILES bin_7.fasta)

target_use_datasources (valik_test FILES various_chromosome_lengths.fasta)
target_use_datasources (valik_test FILES chromosome_metadata.txt)
target_use_datasources (valik_test FILES 0overlap4bins.txt)
target_use_datasources (valik_test FILES 20overlap4bins.txt)
target_use_datasources (valik_test FILES 0overlap16bins.txt)
target_use_datasources (valik_test FILES 20overlap16bins.txt)

target_use_datasources (valik_test FILES single_reference.fasta)
target_use_datasources (valik_test FILES single_query.fq)
target_use_datasources (valik_test FILES reference_metadata.txt)

target_use_datasources (valik_test FILES 150overlap4bins.txt)
target_use_datasources (valik_test FILES 150overlap4bins13window.ibf)
target_use_datasources (valik_test FILES 150overlap4bins15window.ibf)
target_use_datasources (valik_test FILES 150overlap4bins13window1errors.gff.out)
target_use_datasources (valik_test FILES 150overlap4bins15window1errors.gff.out)

target_use_datasources (valik_test FILES 150overlap16bins.txt)
target_use_datasources (valik_test FILES 150overlap16bins13window.ibf)
target_use_datasources (valik_test FILES 150overlap16bins15window.ibf)
target_use_datasources (valik_test FILES 150overlap16bins13window1errors.gff.out)
target_use_datasources (valik_test FILES 150overlap16bins15window1errors.gff.out)

target_use_datasources (valik_test FILES 8bins19window.ibf)
target_use_datasources (valik_test FILES 8bins23window.ibf)
target_use_datasources (valik_test FILES 8bins19window0error50pattern1overlap.gff.out)
target_use_datasources (valik_test FILES 8bins19window0error50pattern40overlap.gff.out)
target_use_datasources (valik_test FILES 8bins19window1error50pattern1overlap.gff.out)
target_use_datasources (valik_test FILES 8bins19window1error50pattern40overlap.gff.out)
target_use_datasources (valik_test FILES 8bins23window0error50pattern1overlap.gff.out)
target_use_datasources (valik_test FILES 8bins23window0error50pattern40overlap.gff.out)
target_use_datasources (valik_test FILES 8bins23window1error50pattern1overlap.gff.out)
target_use_datasources (valik_test FILES 8bins23window1error50pattern40overlap.gff.out)
target_use_datasources (valik_test FILES 8bins19window0error100pattern1overlap.gff.out)
target_use_datasources (valik_test FILES 8bins19window0error100pattern40overlap.gff.out)
target_use_datasources (valik_test FILES 8bins19window1error100pattern1overlap.gff.out)
target_use_datasources (valik_test FILES 8bins19window1error100pattern40overlap.gff.out)
target_use_datasources (valik_test FILES 8bins23window0error100pattern1overlap.gff.out)
target_use_datasources (valik_test FILES 8bins23window0error100pattern40overlap.gff.out)
target_use_datasources (valik_test FILES 8bins23window1error100pattern1overlap.gff.out)
target_use_datasources (valik_test FILES 8bins23window1error100pattern40overlap.gff.out)
target_use_datasources (valik_test FILES query.fq)

target_use_datasources (valik_test FILES 16bins50overlap_dream_all.gff)
target_use_datasources (valik_test FILES 16bins50overlap_reference_metadata.tsv)
target_use_datasources (valik_test FILES 8bins50overlap_dream_all.gff)
target_use_datasources (valik_test FILES 8bins50overlap_reference_metadata.tsv)
target_use_datasources (valik_test FILES multi_seq_ref.fasta)
target_use_datasources (valik_test FILES query_e0.06.fasta)

add_cli_test (dream_test.cpp)
target_use_datasources (dream_test FILES 16bins13window1error.gff)
target_use_datasources (dream_test FILES 16bins13window1error.gff.out)
target_use_datasources (dream_test FILES 16bins13window.ibf)
target_use_datasources (dream_test FILES 16bins15window1error.gff)
target_use_datasources (dream_test FILES 16bins15window1error.gff.out)
target_use_datasources (dream_test FILES 16bins15window.ibf)
target_use_datasources (dream_test FILES 4bins13window1error.gff)
target_use_datasources (dream_test FILES 4bins13window1error.gff.out)
target_use_datasources (dream_test FILES 4bins13window.ibf)
target_use_datasources (dream_test FILES 4bins15window1error.gff)
target_use_datasources (dream_test FILES 4bins15window1error.gff.out)
target_use_datasources (dream_test FILES 4bins15window.ibf)
target_use_datasources (dream_test FILES dummy_reads.fastq)
target_use_datasources (dream_test FILES query.fastq)
target_use_datasources (dream_test FILES ref.fasta)
target_use_datasources (dream_test FILES ref_meta.txt)
target_use_datasources (dream_test FILES seg_meta150overlap16bins.txt)
target_use_datasources (dream_test FILES seg_meta150overlap4bins.txt)
